<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Simple PasuGame Playable</title>
<style>
  body, html {
    margin:0; padding:0; overflow:hidden;
    font-family: Arial, sans-serif;
    background: #335544;
  }
  #game {
    position: relative;
    width: 100vw; height: 100vh;
    background: url('Background.webp') no-repeat center/cover;
  }
  #ground {
    position: absolute; bottom:0;
    width: 100%; height: 12vh;
    background: url('ground.jpg') repeat-x bottom/contain;
    z-index: 10;
  }
  #dino {
    position: absolute;
    bottom: 12vh;
    left: 12vw;
    width: 14vw;
    height: auto;
    background-repeat: no-repeat;
    background-position: center bottom;
    background-size: contain;
    transition: bottom 0.15s;
    z-index: 20;
  }
  #coinBar {
    position: fixed; top: 10px; left: 10px;
    background: #D97448;
    padding: 6px 12px;
    border-radius: 10px;
    color: white;
    font-weight: bold;
    z-index: 1000;
    display: flex; align-items:center; gap: 6px;
  }
  #coinBar img {
    width: 24px; height: 24px;
  }
  #score {
    position: fixed; top: 10px; right: 10px;
    color: white; font-weight: bold;
    font-size: 18px;
    z-index: 1000;
  }
  #lobby {
    position: absolute; inset: 0;
    background: rgba(0,0,0,0.7);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 30;
    color: white;
  }
  #playBtn {
    padding: 20px 60px;
    font-size: 48px;
    background: #D97448;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    font-weight: bold;
  }
  #characterSelect {
    margin-top: 20px;
    display: flex;
    gap: 20px;
  }
  .charBtn {
    width: 100px;
    height: 100px;
    border: 3px solid #fff;
    border-radius: 12px;
    cursor: pointer;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center bottom;
    transition: border-color 0.3s;
  }
  .charBtn.selected {
    border-color: yellow;
  }
  #jumpBtn, #slideBtn {
    position: fixed;
    bottom: 20px;
    width: 80px; height: 80px;
    border-radius: 50%;
    border: none;
    background-color: #D97448;
    color: white;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    z-index: 1000;
  }
  #jumpBtn {
    right: 110px;
  }
  #slideBtn {
    right: 20px;
  }
</style>
</head>
<body>
<div id="game">
  <div id="ground"></div>
  <div id="coinBar"><img src="coin.png" alt="Coin" /> <span id="coinCount">0</span></div>
  <div id="score">Score: 0</div>
  <div id="dino"></div>

  <div id="lobby">
    <button id="playBtn">Play</button>
    <div id="characterSelect">
      <div class="charBtn" data-name="myDino.png" style="background-image:url('myDino.png')" title="Default Dino"></div>
      <div class="charBtn" data-name="peet.png" style="background-image:url('peet.png')" title="Peet"></div>
      <div class="charBtn" data-name="broin.png" style="background-image:url('broin.png')" title="Broin"></div>
    </div>
  </div>

  <button id="jumpBtn" style="display:none;">Jump</button>
  <button id="slideBtn" style="display:none;">Slide</button>
</div>

<script>
  // ตัวแปร
  const lobby = document.getElementById('lobby');
  const playBtn = document.getElementById('playBtn');
  const dino = document.getElementById('dino');
  const coinCountEl = document.getElementById('coinCount');
  const scoreEl = document.getElementById('score');
  const jumpBtn = document.getElementById('jumpBtn');
  const slideBtn = document.getElementById('slideBtn');
  const charBtns = document.querySelectorAll('.charBtn');

  let currentCharacter = 'myDino.png';
  let coins = 0;
  let score = 0;
  let gameRunning = false;
  let isJumping = false;
  let jumpTimeout;
  let slideTimeout;

  // โหลดเสียง
  const jumpSound = new Audio('jump.mp3');
  const slideSound = new Audio('slide.mp3');
  const coinSound = new Audio('box.mp3');

  // เลือกตัวละคร
  charBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      charBtns.forEach(b => b.classList.remove('selected'));
      btn.classList.add('selected');
      currentCharacter = btn.getAttribute('data-name');
      dino.style.backgroundImage = `url(${currentCharacter})`;
    });
  });
  // กำหนด default selected
  charBtns[0].classList.add('selected');
  dino.style.backgroundImage = `url(${currentCharacter})`;

  // เล่นเกม
  playBtn.onclick = () => {
    lobby.style.display = 'none';
    jumpBtn.style.display = 'block';
    slideBtn.style.display = 'block';
    score = 0;
    coins = 0;
    coinCountEl.textContent = coins;
    scoreEl.textContent = 'Score: 0';
    gameRunning = true;
    dino.style.bottom = '12vh';
    runGame();
  };

  // กระโดด
  function jump() {
    if (isJumping) return;
    isJumping = true;
    jumpSound.play();
    dino.style.bottom = '25vh';
    setTimeout(() => {
      dino.style.bottom = '12vh';
      isJumping = false;
    }, 400);
  }

  // สไลด์
  function slide() {
    if (isJumping) return; // ไม่สไลด์ขณะกระโดด
    slideSound.play();
    dino.classList.add('slide');
    setTimeout(() => dino.classList.remove('slide'), 600);
  }

  // ปุ่มมือถือ
  jumpBtn.onclick = jump;
  slideBtn.onclick = slide;

  // กดปุ่ม space = jump, ArrowDown = slide
  window.addEventListener('keydown', e => {
    if (!gameRunning) return;
    if(e.code === 'Space') jump();
    if(e.code === 'ArrowDown') slide();
  });

  // ฟังก์ชันเล่นเกมแบบง่าย (เพิ่มคะแนนเรื่อยๆ)
  function runGame() {
    if (!gameRunning) return;
    score++;
    scoreEl.textContent = 'Score: ' + score;
    // เก็บเหรียญง่ายๆ ทุก 100 คะแนน
    if(score % 100 === 0) {
      coins++;
      coinCountEl.textContent = coins;
      coinSound.play();
    }
    setTimeout(runGame, 100);
  }
</script>
</body>
</html>
